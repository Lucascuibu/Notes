# Introduction to differential geometry

### 数学

如何定义一个点？随便取一个点就好了。一个点是非常基本的单位。除了存在与否，你很难独立的赋予它什么复杂性质。

如何定义一条曲线？尤其是我们希望处处光滑且连续。

简单的取一条函数，例如 $y=x^2$​ 。我们发现他满足这两个定义。什么是光滑呢，光滑指的就是可导，加上定语就是在某一点可导。处处光滑就是在任意一点都可导。你也可以区分一阶可导，二阶可导等等以及无穷可导。什么是连续呢，连续就是在周边邻域都有定义。这里要用到一点epsilon语言。

这里我们有了维度的变化。点是一维的。一群点，或者说一个点的集合组成了一条曲线。或者说在线上可以任意的取一些点。这里我们引入对偶的定义，在一条线上取一组点。连接相邻的点成边，取这些边的中点。这些定的中点练成的边某种意义上就是原点集的对偶。那么边的对偶呢？就是这些中点。

我们刚刚完成一个了离散化。并成功计算了每个点的权重及对偶。对偶使得我们可以在不同维度中沟通。想象一下如果你有一群左右在边上的力，这些力对点的作用怎么计算呢。这是你就可以是用刚才计算的权重加权，当然呢权重有非常多的计算方式。

重新思考一下离散化。我们先是用连续且光滑的二维曲线中获得灵感。进行采样最终得到了一条离散线段，并得出来一些可行的离散性质。这就是我们处理的目的。我们会一次又一次的重复这个过程。这个领域的大部分的工作也都基于此。先连续，在离散。当然，有些时候我们也会从离散的采样获得连续的性质。刚才这些话可能会让你产生很多联想。

关于曲线还有非常多的性质，这一节课我们都会讨论曲线。有些性质是你们已经听过的。在某一点处取导数，我们得到了切线，如果你不了解的话可以回想一下我们是如何从物体的速度求加速度的。在这一点求切线的垂线，我们得到了法线Normal。

有了这两个性质我们可以定义一个更为复杂但是重要的性质也就是曲率。我们还需要复习一下参数化。如何定义一个圆？
$$
x^2 + y^2 = r^2
$$
在$r=1$时也叫单位圆。从初中二年级我们知道还有另一种方法，在某一点展开一个切口比如(1,0)。然后控制角度
$$ {\}
f(t) = \{\cos(t),\sin t\}, \quad t\in[0,2\pi]
$$
这种用一个参数控制更多维度的方式，我们叫做参数化。我们需要定义两侧的端点，参数，以及参数行进的方法。好处就是用少于维度数量的参数控制了更多变量，并且天然的提供了变量之间的关系。对于一段曲线，定义起点终点，有一种非常自然的参数化方法，叫做 arc-length 参数化。我们求出曲线的长度，将t映射到 $[0,1]$​​内。

注意到切线和法线都是线，也就是说他们是向量。曲率是一个标量，也即是一个值。我们定义当曲线被arc-length时，曲率*法线*就是未知的二阶导，参数的一阶导。很自然的想象，当曲率很大时，道路弯折且崎岖，当曲率很小时，道路平坦像一条直线。直线的曲率自然是0。 

密切圆是另外一种理解曲率的方式。密切圆是曲线上一点x处画出长度为1/k，圆心为x-1/k的圆。由于n和t垂直，xc与n共线，xc与t垂直。那么这个圆和原曲线在x处相切，这也是他名字的由来。在平坦的地方，圆会趋向无穷大，在弯曲的地方，圆会很小。在曲率为正的地方，圆在曲线外侧，vice versa。

### 代码

这里我们可以写一些代码了。这一节课最重要的概念就是对偶，参数化和曲率。我们接下来讲解你会需要写什么代码。图形学领域广泛的使用c++，因为经常会有大量的计算。我们另外提供的一种是js，因为你一定会想把自己写的成果展示出来。c++跑个opnegl你只能发视频，但是js可以让你把demo部署到网页上，可移植，便捷，可交互。

 使用c++时，我们使用geometry central作为数据结构，polyscope做为界面。非常推荐你通读这两个库的文档。你会遇到很多不熟悉的概念，但我们会在接下里的14节课中一一解决。为了让你热身今天的作业非常简单，不会涉及到这两个库中的复杂内容，而是另一个你会一直面对的东西，矩阵/线性代数。geometry central默认使用Eigen。Eigen非常简洁，写法易于理解。今天的作业需要你建立一个线性系统，并求解，非常简单。我假设你20分钟就可以写好。

另外一个很重要的建议是，希望你化一点时间，配置好你的ide。我看过很多的朋友即使是cs专业电脑仍然混乱无比。环境满天飞，字体混乱。代码补全，debugger一个都用不了。我在我的电脑上配置了clangd，cmake，编辑器使用vscode，体验非常丝滑。

编译c++库一直是一个难题，不像python可以用conda，js有npm。c++的包管理器相对来说孱弱很多。我们的repo包含了所有的依赖。只需要clone的时候加上—recursive就可以全部下载。如果你是mac/linux用户那么直接下载就好。如果你是windows用户我强烈推荐你使用wsl，会需要一些额外的依赖来驱动图形界面。

##### 结语

这两个库都是有nicolas sharp开发。nico在cmu phd毕业后去到英伟达。他的导师是keenan crane。实际上，这套课程很大程度上是收到keenan的启发。他的课程简洁清晰，配图优雅，代码工整。我也非常推荐你去他的网站看一看。我在bu的最后一期在ed chien的教授下上了这门课。这门课的资料最初是由欧洲的亚琛大学的教授xx开发，配套软件是openmesh和openflipper，而后ut，usc的多位教授改良。我将课程代码用geometry central和polyscope重写，更轻量，界面简约，文档完备。这套课程的参考资料是DGP，实际上，整套课程会带你遍历这本书中绝大部分的案例和概念。在上完之后，你将会清楚的了解什么是几何处理，他和其他子学科是如何交并。希望你会有所收获。明天8点不见不散。
